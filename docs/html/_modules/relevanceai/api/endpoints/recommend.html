<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>relevanceai.api.endpoints.recommend &mdash; Relevance AI 0.1.0 documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../index.html" class="icon icon-home"> Relevance AI
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../relevanceai.api.batch.html">Batch Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../relevanceai.api.endpoints.html">Core Endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../relevanceai.visualise.html">Visualisations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../vectortools.html">Vector Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../features.html">Python Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Relevance AI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
          <li><a href="../../../relevanceai.html">relevanceai</a> &raquo;</li>
      <li>relevanceai.api.endpoints.recommend</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for relevanceai.api.endpoints.recommend</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Recommmend services.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">relevanceai.base</span> <span class="kn">import</span> <span class="n">_Base</span>


<div class="viewcode-block" id="RecommendClient"><a class="viewcode-back" href="../../../../relevanceai.api.endpoints.html#relevanceai.api.endpoints.recommend.RecommendClient">[docs]</a><span class="k">class</span> <span class="nc">RecommendClient</span><span class="p">(</span><span class="n">_Base</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">,</span> <span class="n">api_key</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">api_key</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">api_key</span><span class="p">)</span>

<div class="viewcode-block" id="RecommendClient.vector"><a class="viewcode-back" href="../../../../relevanceai.api.endpoints.html#relevanceai.api.endpoints.recommend.RecommendClient.vector">[docs]</a>    <span class="k">def</span> <span class="nf">vector</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">positive_document_ids</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">negative_document_ids</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">vector_fields</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">approximation_depth</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">vector_operation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;sum&quot;</span><span class="p">,</span>
        <span class="n">sum_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">similarity_metric</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;cosine&quot;</span><span class="p">,</span>
        <span class="n">facets</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span>
<div class="viewcode-block" id="RecommendClient.project"><a class="viewcode-back" href="../../../../relevanceai.api.endpoints.html#relevanceai.api.endpoints.recommend.RecommendClient.project">[docs]</a>        <span class="n">filters</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span></div>
<div class="viewcode-block" id="RecommendClient.api_key"><a class="viewcode-back" href="../../../../relevanceai.api.endpoints.html#relevanceai.api.endpoints.recommend.RecommendClient.api_key">[docs]</a>        <span class="n">min_score</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span></div>
<div class="viewcode-block" id="RecommendClient.config"><a class="viewcode-back" href="../../../../relevanceai.api.endpoints.html#relevanceai.api.endpoints.recommend.RecommendClient.config">[docs]</a>        <span class="n">select_fields</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span></div>
        <span class="n">include_vector</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">asc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">keep_search_history</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">hundred_scale</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Vector Search based recommendations are done by extracting the vectors of the documents ids specified performing some vector operations and then searching the dataset with the resultant vector. This allows us to not only do recommendations but personalized and weighted recommendations. \n</span>
<span class="sd">        Here are a couple of different scenarios and what the queries would look like for those: \n</span>

<span class="sd">        Recommendations Personalized by single liked product:</span>

<span class="sd">        &gt;&gt;&gt; positive_document_ids=[&#39;A&#39;]</span>

<span class="sd">        -&gt; Document ID A Vector = Search Query \n</span>

<span class="sd">        Recommendations Personalized by multiple liked product:</span>

<span class="sd">        &gt;&gt;&gt; positive_document_ids=[&#39;A&#39;, &#39;B&#39;]</span>

<span class="sd">        -&gt; Document ID A Vector + Document ID B Vector = Search Query \n</span>

<span class="sd">        Recommendations Personalized by multiple liked product and disliked products:</span>

<span class="sd">        &gt;&gt;&gt; positive_document_ids=[&#39;A&#39;, &#39;B&#39;], negative_document_ids=[&#39;C&#39;, &#39;D&#39;]</span>

<span class="sd">        -&gt; (Document ID A Vector + Document ID B Vector) - (Document ID C Vector + Document ID C Vector) = Search Query \n</span>

<span class="sd">        Recommendations Personalized by multiple liked product and disliked products with weights:</span>

<span class="sd">        &gt;&gt;&gt; positive_document_ids={&#39;A&#39;:0.5, &#39;B&#39;:1}, negative_document_ids={&#39;C&#39;:0.6, &#39;D&#39;:0.4}</span>

<span class="sd">        -&gt; (Document ID A Vector * 0.5 + Document ID B Vector * 1) - (Document ID C Vector * 0.6 + Document ID D Vector * 0.4) = Search Query \n</span>

<span class="sd">        You can change the operator between vectors with vector_operation:</span>

<span class="sd">        e.g. &gt;&gt;&gt; positive_document_ids=[&#39;A&#39;, &#39;B&#39;], negative_document_ids=[&#39;C&#39;, &#39;D&#39;], vector_operation=&#39;multiply&#39;</span>

<span class="sd">        -&gt; (Document ID A Vector * Document ID B Vector) - (Document ID C Vector * Document ID D Vector) = Search Query</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id : string</span>
<span class="sd">            Unique name of dataset</span>
<span class="sd">        positive_document_ids : dict</span>
<span class="sd">            Positive document IDs to personalize the results with, this will retrive the vectors from the document IDs and consider it in the operation.</span>
<span class="sd">        negative_document_ids: dict</span>
<span class="sd">            Negative document IDs to personalize the results with, this will retrive the vectors from the document IDs and consider it in the operation.</span>
<span class="sd">        vector_fields: list</span>
<span class="sd">            The vector field to search in. It can either be an array of strings (automatically equally weighted) (e.g. [&#39;check_vector_&#39;, &#39;yellow_vector_&#39;]) or it is a dictionary mapping field to float where the weighting is explicitly specified (e.g. {&#39;check_vector_&#39;: 0.2, &#39;yellow_vector_&#39;: 0.5})</span>
<span class="sd">        approximation_depth: int</span>
<span class="sd">            Used for approximate search to speed up search. The higher the number, faster the search but potentially less accurate.</span>
<span class="sd">        vector_operation: string</span>
<span class="sd">            Aggregation for the vectors when using positive and negative document IDs, choose from [&#39;mean&#39;, &#39;sum&#39;, &#39;min&#39;, &#39;max&#39;, &#39;divide&#39;, &#39;mulitple&#39;]</span>
<span class="sd">        sum_fields : bool</span>
<span class="sd">            Whether to sum the multiple vectors similarity search score as 1 or seperate</span>
<span class="sd">        page_size: int</span>
<span class="sd">            Size of each page of results</span>
<span class="sd">        page: int</span>
<span class="sd">            Page of the results</span>
<span class="sd">        similarity_metric: string</span>
<span class="sd">            Similarity Metric, choose from [&#39;cosine&#39;, &#39;l1&#39;, &#39;l2&#39;, &#39;dp&#39;]</span>
<span class="sd">        facets: list</span>
<span class="sd">            Fields to include in the facets, if [] then all</span>
<span class="sd">        filters: list</span>
<span class="sd">            Query for filtering the search results</span>
<span class="sd">        min_score: int</span>
<span class="sd">            Minimum score for similarity metric</span>
<span class="sd">        select_fields: list</span>
<span class="sd">            Fields to include in the search results, empty array/list means all fields.</span>
<span class="sd">        include_vector: bool</span>
<span class="sd">            Include vectors in the search results</span>
<span class="sd">        include_count: bool</span>
<span class="sd">            Include the total count of results in the search results</span>
<span class="sd">        asc: bool</span>
<span class="sd">            Whether to sort results by ascending or descending order</span>
<span class="sd">        keep_search_history: bool</span>
<span class="sd">            Whether to store the history into VecDB. This will increase the storage costs over time.</span>
<span class="sd">        hundred_scale: bool</span>
<span class="sd">            Whether to scale up the metric by 100</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_http_request</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;/services/recommend/vector&quot;</span><span class="p">,</span>
            <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">dataset_id</span><span class="p">,</span>
                <span class="s2">&quot;positive_document_ids&quot;</span><span class="p">:</span> <span class="n">positive_document_ids</span><span class="p">,</span>
                <span class="s2">&quot;negative_document_ids&quot;</span><span class="p">:</span> <span class="n">negative_document_ids</span><span class="p">,</span>
                <span class="s2">&quot;vector_fields&quot;</span><span class="p">:</span> <span class="n">vector_fields</span><span class="p">,</span>
                <span class="s2">&quot;approximation_depth&quot;</span><span class="p">:</span> <span class="n">approximation_depth</span><span class="p">,</span>
                <span class="s2">&quot;vector_operation&quot;</span><span class="p">:</span> <span class="n">vector_operation</span><span class="p">,</span>
                <span class="s2">&quot;sum_fields&quot;</span><span class="p">:</span> <span class="n">sum_fields</span><span class="p">,</span>
                <span class="s2">&quot;page_size&quot;</span><span class="p">:</span> <span class="n">page_size</span><span class="p">,</span>
                <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span>
                <span class="s2">&quot;similarity_metric&quot;</span><span class="p">:</span> <span class="n">similarity_metric</span><span class="p">,</span>
                <span class="s2">&quot;facets&quot;</span><span class="p">:</span> <span class="n">facets</span><span class="p">,</span>
                <span class="s2">&quot;filters&quot;</span><span class="p">:</span> <span class="n">filters</span><span class="p">,</span>
                <span class="s2">&quot;min_score&quot;</span><span class="p">:</span> <span class="n">min_score</span><span class="p">,</span>
                <span class="s2">&quot;select_fields&quot;</span><span class="p">:</span> <span class="n">select_fields</span><span class="p">,</span>
                <span class="s2">&quot;include_vector&quot;</span><span class="p">:</span> <span class="n">include_vector</span><span class="p">,</span>
                <span class="s2">&quot;include_count&quot;</span><span class="p">:</span> <span class="n">include_count</span><span class="p">,</span>
                <span class="s2">&quot;asc&quot;</span><span class="p">:</span> <span class="n">asc</span><span class="p">,</span>
                <span class="s2">&quot;keep_search_history&quot;</span><span class="p">:</span> <span class="n">keep_search_history</span><span class="p">,</span>
                <span class="s2">&quot;hundred_scale&quot;</span><span class="p">:</span> <span class="n">hundred_scale</span><span class="p">,</span></div>
            <span class="p">},</span>
        <span class="p">)</span>

<div class="viewcode-block" id="RecommendClient.diversity"><a class="viewcode-back" href="../../../../relevanceai.api.endpoints.html#relevanceai.api.endpoints.recommend.RecommendClient.diversity">[docs]</a>    <span class="k">def</span> <span class="nf">diversity</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">cluster_vector_field</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">n_clusters</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">positive_document_ids</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">negative_document_ids</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">vector_fields</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">approximation_depth</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">vector_operation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;sum&quot;</span><span class="p">,</span>
        <span class="n">sum_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">similarity_metric</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;cosine&quot;</span><span class="p">,</span>
        <span class="n">facets</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">filters</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">min_score</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">select_fields</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">include_vector</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">asc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">keep_search_history</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">hundred_scale</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">search_history_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">n_init</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
        <span class="n">n_iter</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
        <span class="n">return_as_clusters</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Vector Search based recommendations are done by extracting the vectors of the documents ids specified performing some vector operations and then searching the dataset with the resultant vector. This allows us to not only do recommendations but personalized and weighted recommendations. \n</span>
<span class="sd">        Diversity recommendation increases the variety within the recommendations via clustering. Search results are clustered and the top k items in each cluster are selected. The main clustering parameters are cluster_vector_field and n_clusters, the vector field on which to perform clustering and number of clusters respectively. \n</span>
<span class="sd">        Here are a couple of different scenarios and what the queries would look like for those: \n</span>

<span class="sd">        Recommendations Personalized by single liked product:</span>

<span class="sd">        &gt;&gt;&gt; positive_document_ids=[&#39;A&#39;]</span>

<span class="sd">        -&gt; Document ID A Vector = Search Query</span>

<span class="sd">        Recommendations Personalized by multiple liked product:</span>

<span class="sd">        &gt;&gt;&gt; positive_document_ids=[&#39;A&#39;, &#39;B&#39;]</span>

<span class="sd">        -&gt; Document ID A Vector + Document ID B Vector = Search Query</span>

<span class="sd">        Recommendations Personalized by multiple liked product and disliked products:</span>

<span class="sd">        &gt;&gt;&gt; positive_document_ids=[&#39;A&#39;, &#39;B&#39;], negative_document_ids=[&#39;C&#39;, &#39;D&#39;]</span>

<span class="sd">        -&gt; (Document ID A Vector + Document ID B Vector) - (Document ID C Vector + Document ID C Vector) = Search Query</span>

<span class="sd">        Recommendations Personalized by multiple liked product and disliked products with weights:</span>

<span class="sd">        &gt;&gt;&gt; positive_document_ids={&#39;A&#39;:0.5, &#39;B&#39;:1}, negative_document_ids={&#39;C&#39;:0.6, &#39;D&#39;:0.4}</span>

<span class="sd">        -&gt; (Document ID A Vector * 0.5 + Document ID B Vector * 1) - (Document ID C Vector * 0.6 + Document ID D Vector * 0.4) = Search Query</span>

<span class="sd">        You can change the operator between vectors with vector_operation:</span>

<span class="sd">        e.g. &gt;&gt;&gt; positive_document_ids=[&#39;A&#39;, &#39;B&#39;], negative_document_ids=[&#39;C&#39;, &#39;D&#39;], vector_operation=&#39;multiply&#39;</span>

<span class="sd">        -&gt; (Document ID A Vector * Document ID B Vector) - (Document ID C Vector * Document ID D Vector) = Search Query</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id : string</span>
<span class="sd">            Unique name of dataset</span>
<span class="sd">        cluster_vector_field: str</span>
<span class="sd">            The field to cluster on.</span>
<span class="sd">        n_clusters: int</span>
<span class="sd">            Number of clusters to be specified.</span>
<span class="sd">        positive_document_ids : dict</span>
<span class="sd">            Positive document IDs to personalize the results with, this will retrive the vectors from the document IDs and consider it in the operation.</span>
<span class="sd">        negative_document_ids: dict</span>
<span class="sd">            Negative document IDs to personalize the results with, this will retrive the vectors from the document IDs and consider it in the operation.</span>
<span class="sd">        vector_fields: list</span>
<span class="sd">            The vector field to search in. It can either be an array of strings (automatically equally weighted) (e.g. [&#39;check_vector_&#39;, &#39;yellow_vector_&#39;]) or it is a dictionary mapping field to float where the weighting is explicitly specified (e.g. {&#39;check_vector_&#39;: 0.2, &#39;yellow_vector_&#39;: 0.5})</span>
<span class="sd">        approximation_depth: int</span>
<span class="sd">            Used for approximate search to speed up search. The higher the number, faster the search but potentially less accurate.</span>
<span class="sd">        vector_operation: string</span>
<span class="sd">            Aggregation for the vectors when using positive and negative document IDs, choose from [&#39;mean&#39;, &#39;sum&#39;, &#39;min&#39;, &#39;max&#39;, &#39;divide&#39;, &#39;mulitple&#39;]</span>
<span class="sd">        sum_fields : bool</span>
<span class="sd">            Whether to sum the multiple vectors similarity search score as 1 or seperate</span>
<span class="sd">        page_size: int</span>
<span class="sd">            Size of each page of results</span>
<span class="sd">        page: int</span>
<span class="sd">            Page of the results</span>
<span class="sd">        similarity_metric: string</span>
<span class="sd">            Similarity Metric, choose from [&#39;cosine&#39;, &#39;l1&#39;, &#39;l2&#39;, &#39;dp&#39;]</span>
<span class="sd">        facets: list</span>
<span class="sd">            Fields to include in the facets, if [] then all</span>
<span class="sd">        filters: list</span>
<span class="sd">            Query for filtering the search results</span>
<span class="sd">        min_score: int</span>
<span class="sd">            Minimum score for similarity metric</span>
<span class="sd">        select_fields: list</span>
<span class="sd">            Fields to include in the search results, empty array/list means all fields.</span>
<span class="sd">        include_vector: bool</span>
<span class="sd">            Include vectors in the search results</span>
<span class="sd">        include_count: bool</span>
<span class="sd">            Include the total count of results in the search results</span>
<span class="sd">        asc: bool</span>
<span class="sd">            Whether to sort results by ascending or descending order</span>
<span class="sd">        keep_search_history: bool</span>
<span class="sd">            Whether to store the history into VecDB. This will increase the storage costs over time.</span>
<span class="sd">        hundred_scale: bool</span>
<span class="sd">            Whether to scale up the metric by 100</span>
<span class="sd">        search_history_id: str</span>
<span class="sd">            Search history ID, only used for storing search histories.</span>
<span class="sd">        n_init: int</span>
<span class="sd">            Number of runs to run with different centroid seeds</span>
<span class="sd">        n_iter: int</span>
<span class="sd">            Number of iterations in each run</span>
<span class="sd">        return_as_clusters: bool</span>
<span class="sd">            If True, return as clusters as opposed to results list</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_http_request</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;/services/recommend/diversity&quot;</span><span class="p">,</span>
            <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">dataset_id</span><span class="p">,</span>
                <span class="s2">&quot;positive_document_ids&quot;</span><span class="p">:</span> <span class="n">positive_document_ids</span><span class="p">,</span>
                <span class="s2">&quot;negative_document_ids&quot;</span><span class="p">:</span> <span class="n">negative_document_ids</span><span class="p">,</span>
                <span class="s2">&quot;vector_fields&quot;</span><span class="p">:</span> <span class="n">vector_fields</span><span class="p">,</span>
                <span class="s2">&quot;approximation_depth&quot;</span><span class="p">:</span> <span class="n">approximation_depth</span><span class="p">,</span>
                <span class="s2">&quot;vector_operation&quot;</span><span class="p">:</span> <span class="n">vector_operation</span><span class="p">,</span>
                <span class="s2">&quot;sum_fields&quot;</span><span class="p">:</span> <span class="n">sum_fields</span><span class="p">,</span>
                <span class="s2">&quot;page_size&quot;</span><span class="p">:</span> <span class="n">page_size</span><span class="p">,</span>
                <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span>
                <span class="s2">&quot;similarity_metric&quot;</span><span class="p">:</span> <span class="n">similarity_metric</span><span class="p">,</span>
                <span class="s2">&quot;facets&quot;</span><span class="p">:</span> <span class="n">facets</span><span class="p">,</span>
                <span class="s2">&quot;filters&quot;</span><span class="p">:</span> <span class="n">filters</span><span class="p">,</span>
                <span class="s2">&quot;min_score&quot;</span><span class="p">:</span> <span class="n">min_score</span><span class="p">,</span>
                <span class="s2">&quot;select_fields&quot;</span><span class="p">:</span> <span class="n">select_fields</span><span class="p">,</span>
                <span class="s2">&quot;include_vector&quot;</span><span class="p">:</span> <span class="n">include_vector</span><span class="p">,</span>
                <span class="s2">&quot;include_count&quot;</span><span class="p">:</span> <span class="n">include_count</span><span class="p">,</span>
                <span class="s2">&quot;asc&quot;</span><span class="p">:</span> <span class="n">asc</span><span class="p">,</span>
                <span class="s2">&quot;keep_search_history&quot;</span><span class="p">:</span> <span class="n">keep_search_history</span><span class="p">,</span>
                <span class="s2">&quot;hundred_scale&quot;</span><span class="p">:</span> <span class="n">hundred_scale</span><span class="p">,</span>
                <span class="s2">&quot;search_history_id&quot;</span><span class="p">:</span> <span class="n">search_history_id</span><span class="p">,</span>
                <span class="s2">&quot;cluster_vector_field&quot;</span><span class="p">:</span> <span class="n">cluster_vector_field</span><span class="p">,</span>
                <span class="s2">&quot;n_clusters&quot;</span><span class="p">:</span> <span class="n">n_clusters</span><span class="p">,</span>
                <span class="s2">&quot;n_init&quot;</span><span class="p">:</span> <span class="n">n_init</span><span class="p">,</span>
                <span class="s2">&quot;n_iter&quot;</span><span class="p">:</span> <span class="n">n_iter</span><span class="p">,</span>
                <span class="s2">&quot;return_as_clusters&quot;</span><span class="p">:</span> <span class="n">return_as_clusters</span><span class="p">,</span></div></div>
            <span class="p">},</span>
        <span class="p">)</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Relevance AI.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>